{% extends "base.html" %}
{% block content %}

<h1>Your Tasks</h1>

<div class="actions" style="margin-bottom:12px">
  <a class="btn" href="{% url 'tasks:create' %}">+ New</a>
  <span class="muted">Filters:</span>
  <a class="linkbtn" href="{% url 'tasks:list' %}">All</a>
  <a class="linkbtn" href="?status=not_started">Not started</a>
  <a class="linkbtn" href="?status=in_progress">In progress</a>
  <a class="linkbtn" href="?status=done">Done</a>
</div>

<ul class="list">
  {% for t in object_list %}
    <li>
      <form method="post" action="{% url 'tasks:toggle' t.pk %}">
        {% csrf_token %}
        <button class="toggle" type="submit" aria-label="Toggle done">
          {% if t.status == "done" %}âœ“{% else %}&nbsp;{% endif %}
        </button>
      </form>

      <div class="{% if t.status == 'done' %}done{% endif %}">
        <strong>{{ t.title }}</strong>
        <div class="muted">
          {% if t.due_date %}
            {{ t.due_date|date:"m/d/Y" }}{% if t.due_time %} {{ t.due_time|time:"g:i A" }}{% endif %}
          {% else %}
            no due date
          {% endif %}
        </div>

        <div class="badges" style="margin-top:6px">
          <span class="badge">{{ t.get_status_display }}</span>
          <span class="badge">{{ t.get_priority_display }}</span>
          <span class="badge">{{ t.get_task_type_display }}</span>
        </div>
      </div>

      <a class="linkbtn" href="{% url 'tasks:update' t.pk %}">edit</a>
      <a class="linkbtn" href="{% url 'tasks:delete' t.pk %}">delete</a>
    </li>
  {% empty %}
    <li class="muted">No tasks yet.</li>
  {% endfor %}
</ul>
{% endblock %}

